{"ast":null,"code":"import createTime from './createTime';\nfunction aggregateTests(testsResponse, aggTime) {\n  aggTime = parseInt(aggTime);\n  const formatedTests = [];\n  let testsTracker = {\n    total: 0,\n    cummulative: 0\n  };\n  let trackedMilliseconds;\n  testsResponse.Rows.slice(50).forEach((row, i) => {\n    let millisecStamp = Date.parse(row.Data[2].ScalarValue);\n    let timeToFormat = new Date(trackedMilliseconds);\n    if (!trackedMilliseconds) {\n      trackedMilliseconds = millisecStamp;\n      testsTracker.total += 1;\n      testsTracker.cummulative += row.Data[3].ScalarValue;\n    } else if (millisecStamp >= trackedMilliseconds + 1000 * aggTime) {\n      formatedTests.push({\n        time: createTime(timeToFormat),\n        runtime: testsTracker.cummulative / testsTracker.total\n      });\n      trackedMilliseconds = millisecStamp;\n      testsTracker = {\n        total: 0,\n        cummulative: 0\n      };\n      testsTracker.total += 1;\n      testsTracker.cummulative += Number(row.Data[3].ScalarValue);\n    } else if (i + 1 === testsResponse.Rows.length) {\n      formatedTests.push({\n        time: createTime(timeToFormat),\n        runtime: testsTracker.cummulative / testsTracker.total\n      });\n      testsTracker = {\n        total: 0,\n        cummulative: 0\n      };\n    }\n  });\n  return formatedTests;\n}\nexport default aggregateTests;","map":{"version":3,"names":["createTime","aggregateTests","testsResponse","aggTime","parseInt","formatedTests","testsTracker","total","cummulative","trackedMilliseconds","Rows","slice","forEach","row","i","millisecStamp","Date","parse","Data","ScalarValue","timeToFormat","push","time","runtime","Number","length"],"sources":["/home/jakedevar/help_constellation/constellation-local/constellation-visualizer/src/utils/aggregateTests.js"],"sourcesContent":["import createTime from './createTime';\nfunction aggregateTests(testsResponse, aggTime) {\n  aggTime = parseInt(aggTime);\n  const formatedTests = [];\n  let testsTracker = {\n    total: 0,\n    cummulative: 0\n  };\n  let trackedMilliseconds;\n  testsResponse.Rows.slice(50,).forEach((row, i) => {\n    let millisecStamp = Date.parse(row.Data[2].ScalarValue)\n    let timeToFormat = new Date(trackedMilliseconds);\n    if (!trackedMilliseconds) {\n      trackedMilliseconds = millisecStamp;\n      testsTracker.total += 1;\n      testsTracker.cummulative += row.Data[3].ScalarValue;\n    } else if (millisecStamp >= trackedMilliseconds + (1000 * aggTime)) {\n      formatedTests.push({\n        time: createTime(timeToFormat),\n        runtime: testsTracker.cummulative / testsTracker.total\n      });\n      trackedMilliseconds = millisecStamp;\n      testsTracker = {\n        total: 0,\n        cummulative: 0\n      };\n      testsTracker.total += 1;\n      testsTracker.cummulative += Number(row.Data[3].ScalarValue);\n    } else if (i+1 === testsResponse.Rows.length) {\n      formatedTests.push({\n        time: createTime(timeToFormat),\n        runtime: testsTracker.cummulative / testsTracker.total\n      });\n      testsTracker = {\n        total: 0,\n        cummulative: 0\n      };\n    } \n  })\n  return formatedTests;\n}\n\nexport default aggregateTests;\n"],"mappings":"AAAA,OAAOA,UAAU,MAAM,cAAc;AACrC,SAASC,cAAc,CAACC,aAAa,EAAEC,OAAO,EAAE;EAC9CA,OAAO,GAAGC,QAAQ,CAACD,OAAO,CAAC;EAC3B,MAAME,aAAa,GAAG,EAAE;EACxB,IAAIC,YAAY,GAAG;IACjBC,KAAK,EAAE,CAAC;IACRC,WAAW,EAAE;EACf,CAAC;EACD,IAAIC,mBAAmB;EACvBP,aAAa,CAACQ,IAAI,CAACC,KAAK,CAAC,EAAE,CAAE,CAACC,OAAO,CAAC,CAACC,GAAG,EAAEC,CAAC,KAAK;IAChD,IAAIC,aAAa,GAAGC,IAAI,CAACC,KAAK,CAACJ,GAAG,CAACK,IAAI,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC;IACvD,IAAIC,YAAY,GAAG,IAAIJ,IAAI,CAACP,mBAAmB,CAAC;IAChD,IAAI,CAACA,mBAAmB,EAAE;MACxBA,mBAAmB,GAAGM,aAAa;MACnCT,YAAY,CAACC,KAAK,IAAI,CAAC;MACvBD,YAAY,CAACE,WAAW,IAAIK,GAAG,CAACK,IAAI,CAAC,CAAC,CAAC,CAACC,WAAW;IACrD,CAAC,MAAM,IAAIJ,aAAa,IAAIN,mBAAmB,GAAI,IAAI,GAAGN,OAAQ,EAAE;MAClEE,aAAa,CAACgB,IAAI,CAAC;QACjBC,IAAI,EAAEtB,UAAU,CAACoB,YAAY,CAAC;QAC9BG,OAAO,EAAEjB,YAAY,CAACE,WAAW,GAAGF,YAAY,CAACC;MACnD,CAAC,CAAC;MACFE,mBAAmB,GAAGM,aAAa;MACnCT,YAAY,GAAG;QACbC,KAAK,EAAE,CAAC;QACRC,WAAW,EAAE;MACf,CAAC;MACDF,YAAY,CAACC,KAAK,IAAI,CAAC;MACvBD,YAAY,CAACE,WAAW,IAAIgB,MAAM,CAACX,GAAG,CAACK,IAAI,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC;IAC7D,CAAC,MAAM,IAAIL,CAAC,GAAC,CAAC,KAAKZ,aAAa,CAACQ,IAAI,CAACe,MAAM,EAAE;MAC5CpB,aAAa,CAACgB,IAAI,CAAC;QACjBC,IAAI,EAAEtB,UAAU,CAACoB,YAAY,CAAC;QAC9BG,OAAO,EAAEjB,YAAY,CAACE,WAAW,GAAGF,YAAY,CAACC;MACnD,CAAC,CAAC;MACFD,YAAY,GAAG;QACbC,KAAK,EAAE,CAAC;QACRC,WAAW,EAAE;MACf,CAAC;IACH;EACF,CAAC,CAAC;EACF,OAAOH,aAAa;AACtB;AAEA,eAAeJ,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}