{"ast":null,"code":"import createTime from'./createTime';function aggregateTests(testsResponse,aggTime,toggleExclusion,absoluteXAxis,absoluteYAxis,setAbsoluteXAxis,setAbsoluteYAxis){aggTime=parseInt(aggTime);var formatedTests=[];var testsTracker={total:0,cummulative:0};var trackedMilliseconds;var startExlusion=toggleExclusion?Math.floor(testsResponse.length*0.02):0;var excludedTests=testsResponse.slice(startExlusion);if(!absoluteXAxis){setAbsoluteXAxis(excludedTests[excludedTests.length-1][0]);}var maxY=0;excludedTests.forEach(function(row,i){maxY=Math.max(maxY,row[1]);var millisecStamp=Date.parse(row[0]);var timeToFormat=new Date(trackedMilliseconds);if(!trackedMilliseconds){trackedMilliseconds=millisecStamp;testsTracker.total+=1;testsTracker.cummulative+=row[1];}else if(millisecStamp>=trackedMilliseconds+1000*aggTime){formatedTests.push({time:createTime(timeToFormat),runtime:testsTracker.cummulative/testsTracker.total});trackedMilliseconds=millisecStamp;testsTracker={total:0,cummulative:0};testsTracker.total+=1;testsTracker.cummulative+=Number(row[1]);}else if(i+1===testsResponse.length){formatedTests.push({time:createTime(timeToFormat),runtime:testsTracker.cummulative/testsTracker.total});testsTracker={total:0,cummulative:0};}});if(!absoluteYAxis){setAbsoluteYAxis(maxY);}return formatedTests;}export default aggregateTests;","map":{"version":3,"names":["createTime","aggregateTests","testsResponse","aggTime","toggleExclusion","absoluteXAxis","absoluteYAxis","setAbsoluteXAxis","setAbsoluteYAxis","parseInt","formatedTests","testsTracker","total","cummulative","trackedMilliseconds","startExlusion","Math","floor","length","excludedTests","slice","maxY","forEach","row","i","max","millisecStamp","Date","parse","timeToFormat","push","time","runtime","Number"],"sources":["/home/jakedevar/help_constellation/constellation-local/constellation-visualizer/src/utils/aggregateTests.js"],"sourcesContent":["import createTime from './createTime';\nfunction aggregateTests(testsResponse, aggTime, toggleExclusion, absoluteXAxis, absoluteYAxis, setAbsoluteXAxis, setAbsoluteYAxis) {\n  aggTime = parseInt(aggTime);\n  const formatedTests = [];\n  let testsTracker = {\n    total: 0,\n    cummulative: 0\n  };\n  let trackedMilliseconds;\n  const startExlusion = toggleExclusion ? Math.floor(testsResponse.length * 0.02): 0;\n  const excludedTests = testsResponse.slice(startExlusion);\n  if (!absoluteXAxis) {\n    setAbsoluteXAxis(excludedTests[excludedTests.length - 1][0]);\n  }\n  let maxY = 0;\n  excludedTests.forEach((row, i) => {\n    maxY = Math.max(maxY, row[1]);\n    let millisecStamp = Date.parse(row[0])\n    let timeToFormat = new Date(trackedMilliseconds);\n    if (!trackedMilliseconds) {\n      trackedMilliseconds = millisecStamp;\n      testsTracker.total += 1;\n      testsTracker.cummulative += row[1];\n    } else if (millisecStamp >= trackedMilliseconds + (1000 * aggTime)) {\n      formatedTests.push({\n        time: createTime(timeToFormat),\n        runtime: testsTracker.cummulative / testsTracker.total\n      });\n      trackedMilliseconds = millisecStamp;\n      testsTracker = {\n        total: 0,\n        cummulative: 0\n      };\n      testsTracker.total += 1;\n      testsTracker.cummulative += Number(row[1]);\n    } else if (i+1 === testsResponse.length) {\n      formatedTests.push({\n        time: createTime(timeToFormat),\n        runtime: testsTracker.cummulative / testsTracker.total\n      });\n      testsTracker = {\n        total: 0,\n        cummulative: 0\n      };\n    } \n  })\n  if (!absoluteYAxis) {\n    setAbsoluteYAxis(maxY);\n  }\n  return formatedTests;\n}\n\nexport default aggregateTests;\n"],"mappings":"AAAA,MAAOA,WAAU,KAAM,cAAc,CACrC,QAASC,eAAc,CAACC,aAAa,CAAEC,OAAO,CAAEC,eAAe,CAAEC,aAAa,CAAEC,aAAa,CAAEC,gBAAgB,CAAEC,gBAAgB,CAAE,CACjIL,OAAO,CAAGM,QAAQ,CAACN,OAAO,CAAC,CAC3B,GAAMO,cAAa,CAAG,EAAE,CACxB,GAAIC,aAAY,CAAG,CACjBC,KAAK,CAAE,CAAC,CACRC,WAAW,CAAE,CACf,CAAC,CACD,GAAIC,oBAAmB,CACvB,GAAMC,cAAa,CAAGX,eAAe,CAAGY,IAAI,CAACC,KAAK,CAACf,aAAa,CAACgB,MAAM,CAAG,IAAI,CAAC,CAAE,CAAC,CAClF,GAAMC,cAAa,CAAGjB,aAAa,CAACkB,KAAK,CAACL,aAAa,CAAC,CACxD,GAAI,CAACV,aAAa,CAAE,CAClBE,gBAAgB,CAACY,aAAa,CAACA,aAAa,CAACD,MAAM,CAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAC9D,CACA,GAAIG,KAAI,CAAG,CAAC,CACZF,aAAa,CAACG,OAAO,CAAC,SAACC,GAAG,CAAEC,CAAC,CAAK,CAChCH,IAAI,CAAGL,IAAI,CAACS,GAAG,CAACJ,IAAI,CAAEE,GAAG,CAAC,CAAC,CAAC,CAAC,CAC7B,GAAIG,cAAa,CAAGC,IAAI,CAACC,KAAK,CAACL,GAAG,CAAC,CAAC,CAAC,CAAC,CACtC,GAAIM,aAAY,CAAG,GAAIF,KAAI,CAACb,mBAAmB,CAAC,CAChD,GAAI,CAACA,mBAAmB,CAAE,CACxBA,mBAAmB,CAAGY,aAAa,CACnCf,YAAY,CAACC,KAAK,EAAI,CAAC,CACvBD,YAAY,CAACE,WAAW,EAAIU,GAAG,CAAC,CAAC,CAAC,CACpC,CAAC,IAAM,IAAIG,aAAa,EAAIZ,mBAAmB,CAAI,IAAI,CAAGX,OAAQ,CAAE,CAClEO,aAAa,CAACoB,IAAI,CAAC,CACjBC,IAAI,CAAE/B,UAAU,CAAC6B,YAAY,CAAC,CAC9BG,OAAO,CAAErB,YAAY,CAACE,WAAW,CAAGF,YAAY,CAACC,KACnD,CAAC,CAAC,CACFE,mBAAmB,CAAGY,aAAa,CACnCf,YAAY,CAAG,CACbC,KAAK,CAAE,CAAC,CACRC,WAAW,CAAE,CACf,CAAC,CACDF,YAAY,CAACC,KAAK,EAAI,CAAC,CACvBD,YAAY,CAACE,WAAW,EAAIoB,MAAM,CAACV,GAAG,CAAC,CAAC,CAAC,CAAC,CAC5C,CAAC,IAAM,IAAIC,CAAC,CAAC,CAAC,GAAKtB,aAAa,CAACgB,MAAM,CAAE,CACvCR,aAAa,CAACoB,IAAI,CAAC,CACjBC,IAAI,CAAE/B,UAAU,CAAC6B,YAAY,CAAC,CAC9BG,OAAO,CAAErB,YAAY,CAACE,WAAW,CAAGF,YAAY,CAACC,KACnD,CAAC,CAAC,CACFD,YAAY,CAAG,CACbC,KAAK,CAAE,CAAC,CACRC,WAAW,CAAE,CACf,CAAC,CACH,CACF,CAAC,CAAC,CACF,GAAI,CAACP,aAAa,CAAE,CAClBE,gBAAgB,CAACa,IAAI,CAAC,CACxB,CACA,MAAOX,cAAa,CACtB,CAEA,cAAeT,eAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}