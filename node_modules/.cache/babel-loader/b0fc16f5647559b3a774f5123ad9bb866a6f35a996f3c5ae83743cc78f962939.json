{"ast":null,"code":"import _regeneratorRuntime from\"/home/jakedevar/help_constellation/constellation-local/constellation-visualizer/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/jakedevar/help_constellation/constellation-local/constellation-visualizer/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/jakedevar/help_constellation/constellation-local/constellation-visualizer/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import logo from'./logo.svg';import'./App.css';import{useState,useEffect}from'react';import axios from'axios';import NavBar from'./components/NavBar';import LoadingBubble from'./components/LoadingBubble';import CreateGraphs from'./components/CreateGraphs';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState({regions:[]}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),shownRegion=_useState4[0],setShownRegion=_useState4[1];var _useState5=useState(\"1\"),_useState6=_slicedToArray(_useState5,2),aggTime=_useState6[0],setAggTime=_useState6[1];useEffect(function(){if(!shownRegion&&data.regions.length>0){var regions=data.regions;setShownRegion(regions[regions.length-1]);}},[data]);useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:3002/data?time=\".concat(aggTime));case 2:result=_context.sent;setData(result.data);case 4:case\"end\":return _context.stop();}}},_callee);}))();},[aggTime]);useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"http://localhost:3002/data?time=\".concat(aggTime));case 2:result=_context2.sent;setData(result.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}))();//\n// this exists to support having the visualizer open while a test is running\n// however, it will use the default aggTime of 1\nsetInterval(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:axios.get(\"http://localhost:3002/data?time=\".concat(aggTime)).then(function(res){setData(res.data);}).catch(function(err){console.log(err);});case 1:case\"end\":return _context3.stop();}}},_callee3);})),300000);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"link\",{rel:\"stylesheet\",href:\"https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css\",integrity:\"sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi\",crossOrigin:\"anonymous\"}),/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(NavBar,{regions:data.regions,setShownRegion:setShownRegion,setAggTime:setAggTime})}),/*#__PURE__*/_jsx(\"div\",{children:!shownRegion?/*#__PURE__*/_jsx(LoadingBubble,{}):/*#__PURE__*/_jsx(CreateGraphs,{data:data,shownRegion:shownRegion})})]});}export default App;","map":{"version":3,"names":["logo","useState","useEffect","axios","NavBar","LoadingBubble","CreateGraphs","App","regions","data","setData","shownRegion","setShownRegion","aggTime","setAggTime","length","get","result","setInterval","then","res","catch","err","console","log"],"sources":["/home/jakedevar/help_constellation/constellation-local/constellation-visualizer/src/App.js"],"sourcesContent":["import logo from './logo.svg';\nimport './App.css';\nimport {useState, useEffect} from 'react';\nimport axios from 'axios';\nimport NavBar from './components/NavBar';\nimport LoadingBubble from './components/LoadingBubble';\nimport CreateGraphs from './components/CreateGraphs';\n\nfunction App() {\n\tconst [data, setData] = useState({regions: []});\n  const [shownRegion, setShownRegion] = useState()\n  const [aggTime, setAggTime] = useState(\"1\");\n\n  useEffect(() => {\n    if (!shownRegion && data.regions.length > 0) {\n      const regions = data.regions;\n      setShownRegion(regions[regions.length - 1]);\n    }\n  }, [data])\n\n  useEffect(() => {\n    (async () => {\n      const result = await axios.get(`http://localhost:3002/data?time=${aggTime}`);\n      setData(result.data);\n    })();\n  }, [aggTime])\n\n  useEffect(() => {\n    (async () => {\n      const result = await axios.get(`http://localhost:3002/data?time=${aggTime}`);\n      setData(result.data);\n    })();\n    //\n    // this exists to support having the visualizer open while a test is running\n    // however, it will use the default aggTime of 1\n    setInterval(async () => {\n      axios.get(`http://localhost:3002/data?time=${aggTime}`)\n        .then(res => {\n          setData(res.data);\n        })\n        .catch(err => {\n          console.log(err);\n        })\n    }, 300000);\n  }, []);\n  return (\n    <div className=\"App\">\n      <link\n        rel=\"stylesheet\"\n        href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css\"\n        integrity=\"sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi\"\n        crossOrigin=\"anonymous\"\n        />\n      <header>\n        <NavBar regions={data.regions} setShownRegion={setShownRegion} setAggTime={setAggTime} />\n      </header>\n      <div>\n        {!shownRegion ? <LoadingBubble /> : <CreateGraphs data={data} shownRegion={shownRegion} />}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"+fAAA,MAAOA,KAAI,KAAM,YAAY,CAC7B,MAAO,WAAW,CAClB,OAAQC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CACzC,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,OAAM,KAAM,qBAAqB,CACxC,MAAOC,cAAa,KAAM,4BAA4B,CACtD,MAAOC,aAAY,KAAM,2BAA2B,CAAC,wFAErD,QAASC,IAAG,EAAG,CACd,cAAwBN,QAAQ,CAAC,CAACO,OAAO,CAAE,EAAE,CAAC,CAAC,wCAAxCC,IAAI,eAAEC,OAAO,eACnB,eAAsCT,QAAQ,EAAE,yCAAzCU,WAAW,eAAEC,cAAc,eAClC,eAA8BX,QAAQ,CAAC,GAAG,CAAC,yCAApCY,OAAO,eAAEC,UAAU,eAE1BZ,SAAS,CAAC,UAAM,CACd,GAAI,CAACS,WAAW,EAAIF,IAAI,CAACD,OAAO,CAACO,MAAM,CAAG,CAAC,CAAE,CAC3C,GAAMP,QAAO,CAAGC,IAAI,CAACD,OAAO,CAC5BI,cAAc,CAACJ,OAAO,CAACA,OAAO,CAACO,MAAM,CAAG,CAAC,CAAC,CAAC,CAC7C,CACF,CAAC,CAAE,CAACN,IAAI,CAAC,CAAC,CAEVP,SAAS,CAAC,UAAM,CACd,0DAAC,sKACsBC,MAAK,CAACa,GAAG,2CAAoCH,OAAO,EAAG,QAAtEI,MAAM,eACZP,OAAO,CAACO,MAAM,CAACR,IAAI,CAAC,CAAC,sDACtB,IAAG,CACN,CAAC,CAAE,CAACI,OAAO,CAAC,CAAC,CAEbX,SAAS,CAAC,UAAM,CACd,0DAAC,4KACsBC,MAAK,CAACa,GAAG,2CAAoCH,OAAO,EAAG,QAAtEI,MAAM,gBACZP,OAAO,CAACO,MAAM,CAACR,IAAI,CAAC,CAAC,wDACtB,IAAG,CACJ;AACA;AACA;AACAS,WAAW,wEAAC,0IACVf,KAAK,CAACa,GAAG,2CAAoCH,OAAO,EAAG,CACpDM,IAAI,CAAC,SAAAC,GAAG,CAAI,CACXV,OAAO,CAACU,GAAG,CAACX,IAAI,CAAC,CACnB,CAAC,CAAC,CACDY,KAAK,CAAC,SAAAC,GAAG,CAAI,CACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAClB,CAAC,CAAC,yDACL,GAAE,MAAM,CAAC,CACZ,CAAC,CAAE,EAAE,CAAC,CACN,mBACE,aAAK,SAAS,CAAC,KAAK,wBAClB,aACE,GAAG,CAAC,YAAY,CAChB,IAAI,CAAC,yEAAyE,CAC9E,SAAS,CAAC,yEAAyE,CACnF,WAAW,CAAC,WAAW,EACrB,cACJ,qCACE,KAAC,MAAM,EAAC,OAAO,CAAEb,IAAI,CAACD,OAAQ,CAAC,cAAc,CAAEI,cAAe,CAAC,UAAU,CAAEE,UAAW,EAAG,EAClF,cACT,qBACG,CAACH,WAAW,cAAG,KAAC,aAAa,IAAG,cAAG,KAAC,YAAY,EAAC,IAAI,CAAEF,IAAK,CAAC,WAAW,CAAEE,WAAY,EAAG,EACtF,GACF,CAEV,CAEA,cAAeJ,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}